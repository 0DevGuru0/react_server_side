!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=28)}([function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";var n=r(2),o=r(14),i=r.n(o),s=r(6),a=new n.Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,lowercase:!0,index:!0,validate:{validator:function(e){return i.a.isEmail(e)},message:"{VALUE} is not a valid {PATH}"}},password:{type:String,required:!0,unique:!0,trim:!0},googleId:{type:String}});a.method("comparePassword",function(e,r){Object(s.compare)(e,this.password,function(e,t){r(e,t)})}),a.pre("save",function(r){var n=this;if(!n.isModified)return r();Object(s.genSalt)(10,function(e,t){if(e)return r("some thing went wrong");Object(s.hash)(n.password,t,function(e,t){if(e)return r("can't hash the password,try again");n.password=t,r()})})});var u=Object(n.model)("user",a);t.a=u},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("bcrypt")},function(e,t){e.exports=require("body-parser")},function(e,t,r){e.exports=r(26)},function(e,t){e.exports=require("dotenv")},function(e,t,r){"use strict";var c=r(18)("cookie-session"),f=r(19),l=r(24);function p(e,t){if(this._ctx=e,Object.defineProperty(this,"isNew",{value:!t}),t)for(var r in t)this[r]=t[r]}function o(e){var t=JSON.stringify(e);return new Buffer(t).toString("base64")}e.exports=function(e){var s=e||{},a=s.name||s.key||"express:sess",u=s.keys;!u&&s.secret&&(u=[s.secret]);null==s.overwrite&&(s.overwrite=!0);null==s.httpOnly&&(s.httpOnly=!0);null==s.signed&&(s.signed=!0);if(!u&&s.signed)throw new Error(".keys required.");return c("session options %j",s),function(t,e,r){var n,o,i=t.sessionCookies=new f(t,e,{keys:u});t.sessionOptions=Object.create(s),t.sessionKey=a,t.__defineGetter__("session",function(){if(n)return n;if(!1===n)return null;if(o=i.get(a,t.sessionOptions)){c("parse %s",o);try{n=new p(t,function(e){var t=new Buffer(e,"base64").toString("utf8");return JSON.parse(t)}(o))}catch(e){if(!(e instanceof SyntaxError))throw e;n=new p(t)}}else c("new session"),n=new p(t);return n}),t.__defineSetter__("session",function(e){if(null==e)return n=!1;if("object"==typeof e)return n=new p(t,e);throw new Error("req.session can only be set as null or an object.")}),l(e,function(){if(void 0!==n)try{!1===n?i.set(a,"",t.sessionOptions):(o||n.length)&&n.changed(o)&&n.save()}catch(e){c("error saving session %s",e.message)}}),r()}},p.prototype.inspect=p.prototype.toJSON=function(){for(var e=Object.keys(this),t={},r=0;r<e.length;r++){var n=e[r];"_"!==n[0]&&(t[n]=this[n])}return t},p.prototype.changed=function(e){return!e||(this._json=o(this),this._json!=e)},p.prototype.__defineGetter__("length",function(){return Object.keys(this.toJSON()).length}),p.prototype.__defineGetter__("populated",function(){return!!this.length}),p.prototype.save=function(){var e=this._ctx,t=this._json||o(this),r=e.sessionOptions,n=e.sessionKey;c("save %s",t),e.sessionCookies.set(n,t,r)}},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("validator")},function(e,t){function u(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(a){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=a.apply(e,s);function o(e){u(n,t,r,o,i,"next",e)}function i(e){u(n,t,r,o,i,"throw",e)}o(void 0)})}}},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("debug")},function(e,t,r){"use strict";var c=r(20)("cookies"),n=r(21),f=r(23),l={},o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,i=/^(?:lax|strict)$/i;function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.secure=void 0,this.request=e,this.response=t,r&&(Array.isArray(r)?(c('"keys" argument; provide using options {"keys": [...]}'),this.keys=new n(r)):r.constructor&&"Keygrip"===r.constructor.name?(c('"keys" argument; provide using options {"keys": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new n(r.keys):r.keys,this.secure=r.secure))}function p(e,t,r){if(!o.test(e))throw new TypeError("argument name is invalid");if(t&&!o.test(t))throw new TypeError("argument value is invalid");for(var e in t||(this.expires=new Date(0)),this.name=e,this.value=t||"",r)this[e]=r[e];if(this.path&&!o.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!o.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!i.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function h(e,t){if(t.overwrite)for(var r=e.length-1;0<=r;r--)0===e[r].indexOf(t.name+"=")&&e.splice(r,1);e.push(t.toHeader())}s.prototype.get=function(e,t){var r,n,o,i,s,a,u=e+".sig",c=t&&void 0!==t.signed?t.signed:!!this.keys;if((r=this.request.headers.cookie)&&(n=r.match(function(e){return l[e]?l[e]:l[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)))){if(o=n[1],!t||!c)return o;if(i=this.get(u)){if(s=e+"="+o,!this.keys)throw new Error(".keys required for signed cookies");if(!((a=this.keys.index(s,i))<0))return a&&this.set(u,this.keys.sign(s),{signed:!1}),o;this.set(u,null,{path:"/",signed:!1})}}},s.prototype.set=function(e,t,r){var n=this.response,o=this.request,i=n.getHeader("Set-Cookie")||[],s=void 0!==this.secure?!!this.secure:"https"===o.protocol||o.connection.encrypted,a=new p(e,t,r),u=r&&void 0!==r.signed?r.signed:!!this.keys;if("string"==typeof i&&(i=[i]),!s&&r&&r.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(a.secure=s,r&&"secure"in r&&(a.secure=r.secure),r&&"secureProxy"in r&&(c('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),a.secure=r.secureProxy),h(i,a),r&&u){if(!this.keys)throw new Error(".keys required for signed cookies");a.value=this.keys.sign(a.toString()),a.name+=".sig",h(i,a)}return(n.set?f.OutgoingMessage.prototype.setHeader:n.setHeader).call(n,"Set-Cookie",i),this},p.prototype.path="/",p.prototype.expires=void 0,p.prototype.domain=void 0,p.prototype.httpOnly=!0,p.prototype.sameSite=!1,p.prototype.secure=!1,p.prototype.overwrite=!1,p.prototype.toString=function(){return this.name+"="+this.value},p.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(p.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),c.property(p.prototype,"maxage",'"maxage"; use "maxAge" instead'),s.connect=s.express=function(n){return function(e,t,r){e.cookies=t.cookies=new s(e,t,{keys:n}),r()}},s.Cookie=p,e.exports=s},function(e,t){e.exports=require("depd")},function(e,t,r){"use strict";var s=r(22);function a(o,r,n){if(r||(r="sha1"),n||(n="base64"),!(this instanceof a))return new a(o,r,n);if(!(o&&0 in o))throw new Error("Keys must be provided.");function i(e,t){return s.createHmac(r,t).update(e).digest(n).replace(/\/|\+|=/g,function(e){return{"/":"_","+":"-","=":""}[e]})}this.sign=function(e){return i(e,o[0])},this.verify=function(e,t){return-1<this.index(e,t)},this.index=function(e,t){for(var r=0,n=o.length;r<n;r++)if(u(t,i(e,o[r])))return r;return-1}}a.sign=a.verify=a.index=function(){throw new Error("Usage: require('keygrip')(<array-of-keys>)")};var u=function(e,t){if(null==e&&null!=t)return!1;if(null==t&&null!=e)return!1;if(null==e&&null==t)return!0;if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e.charCodeAt(n)^t.charCodeAt(n);return 0===r};e.exports=a},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("on-headers")},function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),o=r(15),i=r.n(o),s=r(1),u=r.n(s),c=r(16),f=r(3),l=r(5),p=r.n(l),h=r(17),d=r.n(h);r(9).config({path:p.a.resolve(process.cwd(),"config/keys/.env")}),u.a.serializeUser(function(e,t){t(null,e.id)}),u.a.deserializeUser(function(e,t){f.a.findById(e).then(function(e){t(null,e)})});var g={clientID:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,callbackURL:process.env.GOOGLE_AUTH_SUCCESS_CALLBACK,proxy:!0},y=new c.Strategy(g,function(){var o=i()(a.a.mark(function e(t,r,n,o){var i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.findOne({googleId:n.id});case 2:if(i=e.sent)return e.abrupt("return",o(null,i));e.next=5;break;case 5:return e.next=7,new f.a({name:n.displayName,email:n.emails[0].value,password:n.id,googleId:n.id}).save();case 7:s=e.sent,o(null,s);case 9:case"end":return e.stop()}},e)}));return function(e,t,r,n){return o.apply(this,arguments)}}()),v=new d.a({usernameField:"email"},function(e,t,n){f.a.findOne({email:e.toLowerCase()},function(e,r){return e?n(e):r?void r.comparePassword(t,function(e,t){return e?n(e):t?n(null,r):n(null,!1,"Invalid_Credential")}):n(null,!1)})});u.a.use(v),u.a.use(y)},function(e,t,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(27),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(R,e){!function(e){"use strict";var u,t=Object.prototype,c=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag",s="object"==typeof R,a=e.regeneratorRuntime;if(a)s&&(R.exports=a);else{(a=e.regeneratorRuntime=s?R.exports:{}).wrap=w;var f="suspendedStart",l="suspendedYield",p="executing",h="completed",d={},g={};g[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(P([])));v&&v!==t&&c.call(v,o)&&(g=v);var m=O.prototype=b.prototype=Object.create(g);S.prototype=m.constructor=O,O.constructor=S,O[i]=S.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(m),e},a.awrap=function(e){return{__await:e}},L(k.prototype),k.prototype[n]=function(){return this},a.AsyncIterator=k,a.async=function(e,t,r,n){var o=new k(w(e,t,r,n));return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},L(m),m[i]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},a.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(q),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var s=c.call(o,"catchLoc"),a=c.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),q(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;q(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),d}}}function w(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),s=new j(n||[]);return i._invoke=function(i,s,a){var u=f;return function(e,t){if(u===p)throw new Error("Generator is already running");if(u===h){if("throw"===e)throw t;return G()}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){var n=_(r,a);if(n){if(n===d)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===f)throw u=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u=p;var o=x(i,s,a);if("normal"===o.type){if(u=a.done?h:l,o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(u=h,a.method="throw",a.arg=o.arg)}}}(e,r,s),i}function x(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function b(){}function S(){}function O(){}function L(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(u){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){var i=x(u[e],u,r);if("throw"!==i.type){var s=i.arg,a=s.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(a).then(function(e){s.value=e,n(s)},function(e){return t("throw",e,n,o)})}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function _(e,t){var r=e.iterator[t.method];if(r===u){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=x(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e};return n.next=n}}return{next:G}}function G(){return{value:u,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,r){"use strict";r.r(t);var n=r(4),o=r.n(n),i=r(2),s=r.n(i),a=r(7),u=r.n(a),c=r(1),f=r.n(c),l=r(5),p=r.n(l),h=r(10),d=r.n(h),g=r(11),y=r.n(g),v=r(12),m=r.n(v),w=function(e,t,r){e.user?r():t.status(404).send({error:"You must log in!"})},x={},b=[{id:1,name:"Leanne Graham"},{id:2,name:"Ervin Howell"},{id:3,name:"Clementine Bauch"},{id:4,name:"Patricia Lebsack"},{id:5,name:"Chelsey Dietrich"}],S=[{id:1,name:"Kurtis Weissnat"},{id:2,name:"Nicholas Runolfsdottir"},{id:3,name:"Gelann Reichert"},{id:4,name:"Moriah Stanton"},{id:5,name:"Rey Padberg"}];x.rootPage=function(e,t){var r='\n        <div>\n        You don\'t appear to be logged in.  You can log in by visiting\n        <a href="/auth/google">the Authentication Route</a>. You could\n        also look at details about yourself at <a href="/api/current_user">the Current User route</a>\n        </div>\n    ';e.user&&(r='\n        <div>\n            You appear to be logged in, so you can visit <a href="/admins">the Admins route</a>\n            or you can <a href="/logout">Logout</a>.\n        </div>\n        '),t.send('\n        <div>\n        <h4>Hi!  Welcome to the React SSR API</h4>\n        <div>\n            You can see <a href="/users">the Users route</a>\n        </div>\n        '.concat(r,"\n        </div>\n    "))},x.usersList=function(e,t){t.send(b)},x.logIn=function(e,t){t.send('\n    <html>\n      <body>\n        <a href="auth/google">Login via Google</a>\n      </body>\n    </html>')},x.admins=function(e,t){t.send(S)},x.redirectToRoot=function(e,t){t.redirect("/")};var O=x,L=o.a.Router(),k=f.a.authenticate("google",{scope:["profile","email"]}),_=f.a.authenticate("google");L.get("/auth/google",k),L.get("/api/auth/google/callback",_,O.redirectToRoot),L.get("/auth/google/callback",_,O.redirectToRoot),L.get("/logout",w,O.redirectToRoot),L.get("/current_user",w,function(e,t){t.send(e.user)});var E=L,q=o.a.Router();q.get("/",O.rootPage),q.get("/users",O.usersList),q.get("/admins",w,O.admins),q.get("/login",O.logIn);var j=q,P=r(13),G=r.n(P),R=r(0),N=new R.GraphQLObjectType({name:"UserType",fields:{id:{type:R.GraphQLID},name:{type:R.GraphQLString},email:{type:R.GraphQLString}}}),T=new R.GraphQLObjectType({name:"RootQueryType",fields:function(){return{user:{type:N,resolve:function(e,t,r){return r.user}}}}}),C=r(3),A={SignUp:function(e){var t=e.email,r=e.password,n=e.name,o=e.req;if(!t||!r)throw new Error("type all credentials");return C.a.findOne({email:t}).then(function(e){if(e)throw new Error("Email is in use");return new C.a({email:t,password:r,name:n}).save()}).then(function(n){return new Promise(function(t,r){o.login(n,function(e){return e&&r(e),t(n)})})})},SignIn:function(e){var t=e.email,o=e.password,i=e.req;if(!t&&!o)throw new Error("type all credentials");return new Promise(function(r,n){f.a.authenticate("local",function(e,t){return t?e?n(e):void i.login(t,function(e){return e?n(e):r(t)}):n("you are not registered yet please signUp first")})({body:{email:t,password:o}})})}},I=A,Q=new R.GraphQLObjectType({name:"MutationObserver",fields:function(){return{SignIn:{type:N,args:{email:{type:new R.GraphQLNonNull(R.GraphQLString)},password:{type:new R.GraphQLNonNull(R.GraphQLString)}},resolve:function(e,t,r){var n=t.password,o=t.email;return I.SignIn({email:o,password:n,req:r})}},SignUp:{type:N,args:{name:{type:new R.GraphQLNonNull(R.GraphQLString)},email:{type:new R.GraphQLNonNull(R.GraphQLString)},password:{type:new R.GraphQLNonNull(R.GraphQLString)}},resolve:function(e,t,r){var n=t.email,o=t.password,i=t.name;return I.SignUp({email:n,password:o,name:i,req:r})}},SignOut:{type:N,resolve:function(e,t,r){var n=r.user;return r.logout(),n}}}}}),U=new R.GraphQLSchema({query:T,mutation:Q});r(25),s.a.connect(process.env.DB_ADDRESS,{useNewUrlParser:!0}),s.a.connection.on("connected",function(){console.log("connection established successfully")}),s.a.connection.on("error",function(e){console.log("connection to mongo failed "+e)}),s.a.connection.on("disconnected",function(){console.log("mongo db connection closed")}),s.a.set("useCreateIndex",!0),s.a.Promise=global.Promise;var D=o()();r(9).config({path:p.a.resolve(process.cwd(),"config/keys/.env")}),D.use(y()()),D.use(u.a.json()),D.use(u.a.urlencoded({extended:!0}));var H=[process.env.CORS_APPROVED_ADDRESS,"http://localhost:".concat(process.env.PORT)],M={origin:function(e,t){-1===H.indexOf(e)&&e?t(new Error("Not allowed by CORS")):t(null,!0)}};D.use(m()(M)),D.use(d()({maxAge:2592e6,keys:["asfdsfdsvCSDfczxsad"]})),D.use(f.a.initialize()),D.use(f.a.session()),D.use("/graphql",G()({schema:U,graphiql:!0})),D.use("/",E),D.use("/",j),D.listen(process.env.PORT,function(){console.log("[UserManagement]_server is running on port ".concat(process.env.PORT))})}]);