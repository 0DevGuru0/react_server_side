!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=28)}([function(e,t){e.exports=require("graphql")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("mongoose")},function(e,t,n){"use strict";var r=n(2),o=n(14),i=n.n(o),s=n(6),a=new r.Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,lowercase:!0,index:!0,validate:{validator:function(e){return i.a.isEmail(e)},message:"{VALUE} is not a valid {PATH}"}},password:{type:String,required:!0,unique:!0,trim:!0},googleId:{type:String}});a.method("comparePassword",function(e,n){Object(s.compare)(e,this.password,function(e,t){n(e,t)})}),a.pre("save",function(n){var r=this;if(!r.isModified)return n();Object(s.genSalt)(10,function(e,t){if(e)return n("some thing went wrong");Object(s.hash)(r.password,t,function(e,t){if(e)return n("can't hash the password,try again");r.password=t,n()})})});var u=Object(r.model)("user",a);t.a=u},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("bcrypt")},function(e,t){e.exports=require("body-parser")},function(e,t,n){e.exports=n(26)},function(e,t){e.exports=require("dotenv")},function(e,t,n){"use strict";var c=n(18)("cookie-session"),f=n(19),l=n(24);function p(e,t){if(this._ctx=e,Object.defineProperty(this,"isNew",{value:!t}),t)for(var n in t)this[n]=t[n]}function o(e){var t=JSON.stringify(e);return new Buffer(t).toString("base64")}e.exports=function(e){var s=e||{},a=s.name||s.key||"express:sess",u=s.keys;!u&&s.secret&&(u=[s.secret]);null==s.overwrite&&(s.overwrite=!0);null==s.httpOnly&&(s.httpOnly=!0);null==s.signed&&(s.signed=!0);if(!u&&s.signed)throw new Error(".keys required.");return c("session options %j",s),function(t,e,n){var r,o,i=t.sessionCookies=new f(t,e,{keys:u});t.sessionOptions=Object.create(s),t.sessionKey=a,t.__defineGetter__("session",function(){if(r)return r;if(!1===r)return null;if(o=i.get(a,t.sessionOptions)){c("parse %s",o);try{r=new p(t,function(e){var t=new Buffer(e,"base64").toString("utf8");return JSON.parse(t)}(o))}catch(e){if(!(e instanceof SyntaxError))throw e;r=new p(t)}}else c("new session"),r=new p(t);return r}),t.__defineSetter__("session",function(e){if(null==e)return r=!1;if("object"==typeof e)return r=new p(t,e);throw new Error("req.session can only be set as null or an object.")}),l(e,function(){if(void 0!==r)try{!1===r?i.set(a,"",t.sessionOptions):(o||r.length)&&r.changed(o)&&r.save()}catch(e){c("error saving session %s",e.message)}}),n()}},p.prototype.inspect=p.prototype.toJSON=function(){for(var e=Object.keys(this),t={},n=0;n<e.length;n++){var r=e[n];"_"!==r[0]&&(t[r]=this[r])}return t},p.prototype.changed=function(e){return!e||(this._json=o(this),this._json!=e)},p.prototype.__defineGetter__("length",function(){return Object.keys(this.toJSON()).length}),p.prototype.__defineGetter__("populated",function(){return!!this.length}),p.prototype.save=function(){var e=this._ctx,t=this._json||o(this),n=e.sessionOptions,r=e.sessionKey;c("save %s",t),e.sessionCookies.set(r,t,n)}},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("express-graphql")},function(e,t){e.exports=require("validator")},function(e,t){function u(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}e.exports=function(a){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=a.apply(e,s);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}}},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";var c=n(20)("cookies"),r=n(21),f=n(23),l={},o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,i=/^(?:lax|strict)$/i;function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);this.secure=void 0,this.request=e,this.response=t,n&&(Array.isArray(n)?(c('"keys" argument; provide using options {"keys": [...]}'),this.keys=new r(n)):n.constructor&&"Keygrip"===n.constructor.name?(c('"keys" argument; provide using options {"keys": keygrip}'),this.keys=n):(this.keys=Array.isArray(n.keys)?new r(n.keys):n.keys,this.secure=n.secure))}function p(e,t,n){if(!o.test(e))throw new TypeError("argument name is invalid");if(t&&!o.test(t))throw new TypeError("argument value is invalid");for(var e in t||(this.expires=new Date(0)),this.name=e,this.value=t||"",n)this[e]=n[e];if(this.path&&!o.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!o.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!i.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function h(e,t){if(t.overwrite)for(var n=e.length-1;0<=n;n--)0===e[n].indexOf(t.name+"=")&&e.splice(n,1);e.push(t.toHeader())}s.prototype.get=function(e,t){var n,r,o,i,s,a,u=e+".sig",c=t&&void 0!==t.signed?t.signed:!!this.keys;if((n=this.request.headers.cookie)&&(r=n.match(function(e){return l[e]?l[e]:l[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)))){if(o=r[1],!t||!c)return o;if(i=this.get(u)){if(s=e+"="+o,!this.keys)throw new Error(".keys required for signed cookies");if(!((a=this.keys.index(s,i))<0))return a&&this.set(u,this.keys.sign(s),{signed:!1}),o;this.set(u,null,{path:"/",signed:!1})}}},s.prototype.set=function(e,t,n){var r=this.response,o=this.request,i=r.getHeader("Set-Cookie")||[],s=void 0!==this.secure?!!this.secure:"https"===o.protocol||o.connection.encrypted,a=new p(e,t,n),u=n&&void 0!==n.signed?n.signed:!!this.keys;if("string"==typeof i&&(i=[i]),!s&&n&&n.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(a.secure=s,n&&"secure"in n&&(a.secure=n.secure),n&&"secureProxy"in n&&(c('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),a.secure=n.secureProxy),h(i,a),n&&u){if(!this.keys)throw new Error(".keys required for signed cookies");a.value=this.keys.sign(a.toString()),a.name+=".sig",h(i,a)}return(r.set?f.OutgoingMessage.prototype.setHeader:r.setHeader).call(r,"Set-Cookie",i),this},p.prototype.path="/",p.prototype.expires=void 0,p.prototype.domain=void 0,p.prototype.httpOnly=!0,p.prototype.sameSite=!1,p.prototype.secure=!1,p.prototype.overwrite=!1,p.prototype.toString=function(){return this.name+"="+this.value},p.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(p.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),c.property(p.prototype,"maxage",'"maxage"; use "maxAge" instead'),s.connect=s.express=function(r){return function(e,t,n){e.cookies=t.cookies=new s(e,t,{keys:r}),n()}},s.Cookie=p,e.exports=s},function(e,t){e.exports=require("depd")},function(e,t,n){"use strict";var s=n(22);function a(o,n,r){if(n||(n="sha1"),r||(r="base64"),!(this instanceof a))return new a(o,n,r);if(!(o&&0 in o))throw new Error("Keys must be provided.");function i(e,t){return s.createHmac(n,t).update(e).digest(r).replace(/\/|\+|=/g,function(e){return{"/":"_","+":"-","=":""}[e]})}this.sign=function(e){return i(e,o[0])},this.verify=function(e,t){return-1<this.index(e,t)},this.index=function(e,t){for(var n=0,r=o.length;n<r;n++)if(u(t,i(e,o[n])))return n;return-1}}a.sign=a.verify=a.index=function(){throw new Error("Usage: require('keygrip')(<array-of-keys>)")};var u=function(e,t){if(null==e&&null!=t)return!1;if(null==t&&null!=e)return!1;if(null==e&&null==t)return!0;if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e.charCodeAt(r)^t.charCodeAt(r);return 0===n};e.exports=a},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("on-headers")},function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),o=n(15),i=n.n(o),s=n(1),u=n.n(s),c=n(16),f=n(3),l=n(5),p=n.n(l),h=n(17),d=n.n(h);n(9).config({path:p.a.resolve(process.cwd(),"config/keys/.env")}),u.a.serializeUser(function(e,t){t(null,e.id)}),u.a.deserializeUser(function(e,t){f.a.findById(e).then(function(e){t(null,e)})});var g={clientID:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,callbackURL:process.env.GOOGLE_AUTH_SUCCESS_CALLBACK,proxy:!0},y=new c.Strategy(g,function(){var o=i()(a.a.mark(function e(t,n,r,o){var i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.findOne({googleId:r.id});case 2:if(i=e.sent)return e.abrupt("return",o(null,i));e.next=5;break;case 5:return e.next=7,new f.a({name:r.displayName,email:r.emails[0].value,password:r.id,googleId:r.id}).save();case 7:s=e.sent,o(null,s);case 9:case"end":return e.stop()}},e)}));return function(e,t,n,r){return o.apply(this,arguments)}}()),v=new d.a({usernameField:"email"},function(e,t,r){f.a.findOne({email:e.toLowerCase()},function(e,n){return e?r(e):n?void n.comparePassword(t,function(e,t){return e?r(e):t?r(null,n):r(null,!1,"Invalid_Credential")}):r(null,!1)})});u.a.use(v),u.a.use(y)},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(27),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(N,e){!function(e){"use strict";var u,t=Object.prototype,c=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag",s="object"==typeof N,a=e.regeneratorRuntime;if(a)s&&(N.exports=a);else{(a=e.regeneratorRuntime=s?N.exports:{}).wrap=w;var f="suspendedStart",l="suspendedYield",p="executing",h="completed",d={},g={};g[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(G([])));v&&v!==t&&c.call(v,o)&&(g=v);var m=O.prototype=b.prototype=Object.create(g);S.prototype=m.constructor=O,O.constructor=S,O[i]=S.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(m),e},a.awrap=function(e){return{__await:e}},k(L.prototype),L.prototype[r]=function(){return this},a.AsyncIterator=L,a.async=function(e,t,n,r){var o=new L(w(e,t,n,r));return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(m),m[i]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=G,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(q),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var s=c.call(o,"catchLoc"),a=c.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;q(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:G(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=u),d}}}function w(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),s=new j(r||[]);return i._invoke=function(i,s,a){var u=f;return function(e,t){if(u===p)throw new Error("Generator is already running");if(u===h){if("throw"===e)throw t;return P()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){var r=_(n,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===f)throw u=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u=p;var o=x(i,s,a);if("normal"===o.type){if(u=a.done?h:l,o.arg===d)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(u=h,a.method="throw",a.arg=o.arg)}}}(e,n,s),i}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function b(){}function S(){}function O(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function L(u){var t;this._invoke=function(n,r){function e(){return new Promise(function(e,t){!function t(e,n,r,o){var i=x(u[e],u,n);if("throw"!==i.type){var s=i.arg,a=s.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):Promise.resolve(a).then(function(e){s.value=e,r(s)},function(e){return t("throw",e,r,o)})}o(i.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function _(e,t){var n=e.iterator[t.method];if(n===u){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=x(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function G(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=u,e.done=!0,e};return r.next=r}}return{next:P}}function P(){return{value:u,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),i=n(2),s=n.n(i),a=n(7),u=n.n(a),c=n(1),f=n.n(c),l=n(5),p=n.n(l),h=n(10),d=n.n(h),g=n(11),y=n.n(g),v=n(12),m=n.n(v),w=function(e,t,n){e.user?n():t.status(404).send({error:"You must log in!"})},x=o.a.Router(),b=f.a.authenticate("google",{scope:["profile","email"]}),S=f.a.authenticate("google");x.get("/auth/google",b),x.get("/api/auth/google/callback",S,function(e,t){t.redirect("/")}),x.get("/auth/google/callback",S,function(e,t){t.redirect("/")}),x.get("/logout",w,function(e,t){e.logOut(),t.redirect("/")}),x.get("/current_user",w,function(e,t){t.send(e.user)});var O=x,k=o.a.Router();k.get("/",function(e,t){var n='\n    <div>\n      You don\'t appear to be logged in.  You can log in by visiting\n      <a href="/auth/google">the Authentication Route</a>. You could\n      also look at details about yourself at <a href="/api/current_user">the Current User route</a>\n    </div>\n  ';e.user&&(n='\n      <div>\n        You appear to be logged in, so you can visit <a href="/admins">the Admins route</a>\n        or you can <a href="/logout">Logout</a>.\n      </div>\n    '),t.send('\n    <div>\n      <h4>Hi!  Welcome to the React SSR API</h4>\n      <div>\n        You can see <a href="/users">the Users route</a>\n      </div>\n      '.concat(n,"\n    </div>\n  "))}),k.get("/users",function(e,t){t.send(L)}),k.get("/users/xss",function(e,t){t.send(_)}),k.get("/admins",w,function(e,t){t.send(E)}),k.get("/login",function(e,t){t.send('\n  <html>\n    <body>\n      <a href="auth/google">Login via Google</a>\n    </body>\n  </html>')});var L=[{id:1,name:"Leanne Graham"},{id:2,name:"Ervin Howell"},{id:3,name:"Clementine Bauch"},{id:4,name:"Patricia Lebsack"},{id:5,name:"Chelsey Dietrich"}],_=[{id:1,name:"<\/script><script>alert(1234567890)<\/script>"},{id:2,name:"Ervin Howell"},{id:3,name:"Clementine Bauch"},{id:4,name:"Patricia Lebsack"},{id:5,name:"Chelsey Dietrich"}],E=[{id:1,name:"Kurtis Weissnat"},{id:2,name:"Nicholas Runolfsdottir"},{id:3,name:"Gelann Reichert"},{id:4,name:"Moriah Stanton"},{id:5,name:"Rey Padberg"}],q=k,j=n(13),G=n.n(j),P=n(0),N=new P.GraphQLObjectType({name:"UserType",fields:{id:{type:P.GraphQLID},name:{type:P.GraphQLString},email:{type:P.GraphQLString}}}),R=new P.GraphQLObjectType({name:"RootQueryType",fields:function(){return{user:{type:N,resolve:function(e,t,n){return n.user}}}}}),C=n(3),T={SignUp:function(e){var t=e.email,n=e.password,r=e.name,o=e.req;if(!t||!n)throw new Error("type all credentials");return C.a.findOne({email:t}).then(function(e){if(e)throw new Error("Email is in use");return new C.a({email:t,password:n,name:r}).save()}).then(function(r){return new Promise(function(t,n){o.login(r,function(e){return e&&n(e),t(r)})})})},SignIn:function(e){var t=e.email,o=e.password,i=e.req;if(!t&&!o)throw new Error("type all credentials");return new Promise(function(n,r){f.a.authenticate("local",function(e,t){return t?e?r(e):void i.login(t,function(e){return e?r(e):n(t)}):r("you are not registered yet please signUp first")})({body:{email:t,password:o}})})}},A=T,I=new P.GraphQLObjectType({name:"MutationObserver",fields:function(){return{SignIn:{type:N,args:{email:{type:new P.GraphQLNonNull(P.GraphQLString)},password:{type:new P.GraphQLNonNull(P.GraphQLString)}},resolve:function(e,t,n){var r=t.password,o=t.email;return A.SignIn({email:o,password:r,req:n})}},SignUp:{type:N,args:{name:{type:new P.GraphQLNonNull(P.GraphQLString)},email:{type:new P.GraphQLNonNull(P.GraphQLString)},password:{type:new P.GraphQLNonNull(P.GraphQLString)}},resolve:function(e,t,n){var r=t.email,o=t.password,i=t.name;return A.SignUp({email:r,password:o,name:i,req:n})}},SignOut:{type:N,resolve:function(e,t,n){var r=n.user;return n.logout(),r}}}}}),Q=new P.GraphQLSchema({query:R,mutation:I});n(25),s.a.connect(process.env.DB_ADDRESS,{useNewUrlParser:!0}),s.a.connection.on("connected",function(){console.log("connection established successfully")}),s.a.connection.on("error",function(e){console.log("connection to mongo failed "+e)}),s.a.connection.on("disconnected",function(){console.log("mongo db connection closed")}),s.a.set("useCreateIndex",!0),s.a.Promise=global.Promise;var U=o()();n(9).config({path:p.a.resolve(process.cwd(),"config/keys/.env")}),U.use(y()()),U.use(u.a.json()),U.use(u.a.urlencoded({extended:!0}));var D=[process.env.CORS_APPROVED_ADDRESS,"http://localhost:".concat(process.env.PORT)],H={origin:function(e,t){-1===D.indexOf(e)&&e?t(new Error("Not allowed by CORS")):t(null,!0)}};U.use(m()(H)),U.use(d()({maxAge:2592e6,keys:["asfdsfdsvCSDfczxsad"]})),U.use(f.a.initialize()),U.use(f.a.session()),U.use("/graphql",G()({schema:Q,graphiql:!0})),U.use("/",O),U.use("/",q),U.listen(process.env.PORT,function(){console.log("[UserManagement]_server is running on port ".concat(process.env.PORT))})}]);